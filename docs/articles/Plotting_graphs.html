<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plotting graphs for structural equation models • tidySEM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Plotting graphs for structural equation models">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidySEM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Plotting_graphs.html">Plotting graphs for structural equation models</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Plotting graphs for structural equation models</h1>
            
      
      
      <div class="hidden name"><code>Plotting_graphs.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidySEM)</a></code></pre></div>
<p><code>tidySEM</code> offers a user-friendly, tidy workflow for plotting graphs for SEM models. The workflow is largely <em>programatic</em>, meaning that graphs are created mostly automatically from the output of an analysis. There is one important intentional exception to the programmatic workflow: <strong>Users must create a layout matrix for the graph by hand.</strong> This allows swift customization of graphics, and artistic freedom. Some existing graphing packages automatically create a layout, but are very difficult to customize. Particularly for complex SEM models, it may be preferable to make the layout by hand, including only nodes one wishes to plot, and reporting the rest in a comprehensive table of coefficients (e.g., one obtained through <code><a href="../reference/table_results.html">table_results()</a></code>.</p>
<div id="the-tidysem-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#the-tidysem-workflow" class="anchor"></a>The tidySEM workflow</h2>
<p>The workflow underlying graphing in <code>tidySEM</code> is as follows:</p>
<ol style="list-style-type: decimal">
<li>Run an analysis, e.g., using <code><a href="https://rdrr.io/pkg/lavaan/man/sem.html">lavaan::sem()</a></code> or <code><a href="https://rdrr.io/pkg/MplusAutomation/man/mplusModeler.html">MplusAutomation::mplusModeler()</a></code>, assing the output to an object, e.g., <code>fit</code>
</li>
<li>Examine what nodes and edges can be extracted from the fit model object, by running <code><a href="../reference/get_nodes.html">get_nodes(fit)</a></code> and <code><a href="../reference/get_edges.html">get_edges(fit)</a></code>
</li>
<li>Specify a layout for the graph using <code><a href="../reference/layout.html">get_layout()</a></code>
</li>
<li>
<em>Optionally</em>, prepare graph data before plotting, by running <code><a href="../reference/prepare_graph.html">prepare_graph(fit, layout)</a></code>. Store the resulting graph data in an object, e.g., <code>graph_data</code>
</li>
<li>
<em>Optionally</em>, access the nodes and edges in <code>graph_data</code> using <code><a href="../reference/nodes.html">nodes(graph_data)</a></code> and <code><a href="../reference/edges.html">edges(graph_data)</a></code>
</li>
<li>
<em>Optionally</em>, modify the nodes and edges in <code>graph_data</code> using <code>nodes(graph_data) &lt;- ...</code>and <code>edges(graph_data) &lt;- ...</code>
</li>
<li>Plot the graph using <code><a href="https://rdrr.io/r/graphics/plot.html">plot(graph_data)</a></code>, or skip steps 4-6 and use the function <code><a href="../reference/graph.html">graph(model, layout)</a></code>.</li>
</ol>
<p>This workflow ensures a high degree of transparancy and customizability. Objects returned by all functions are “tidy” data, i.e., tabular <code>data.frames</code>, and can be modified using the familiar suite of functions in the <code>tidyverse</code>.</p>
</div>
<div id="example-graphing-a-cfa" class="section level2">
<h2 class="hasAnchor">
<a href="#example-graphing-a-cfa" class="anchor"></a>Example: Graphing a CFA</h2>
<div id="step-1-run-an-analysis" class="section level3">
<h3 class="hasAnchor">
<a href="#step-1-run-an-analysis" class="anchor"></a>Step 1: Run an analysis</h3>
<p>As an example, let’s make a graph for a classic <code>lavaan</code> tutorial example for CFA. First, we conduct the SEM analysis:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lavaan)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt; This is lavaan 0.6-5</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt; lavaan is BETA software! Please report any bugs.</span></a>
<a class="sourceLine" id="cb2-4" title="4">HS.model &lt;-<span class="st"> ' visual  =~ x1 + x2 + x3</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="st">              textual =~ x4 + x5 + x6</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="st">              speed   =~ x7 + x8 + x9 '</span></a>
<a class="sourceLine" id="cb2-7" title="7">fit &lt;-<span class="st"> </span><span class="kw">cfa</span>(HS.model, <span class="dt">data=</span>HolzingerSwineford1939)</a></code></pre></div>
</div>
<div id="step-2-examine-nodes-and-edges" class="section level3">
<h3 class="hasAnchor">
<a href="#step-2-examine-nodes-and-edges" class="anchor"></a>Step 2: Examine nodes and edges</h3>
<p>For the simple model above, it is easy to verify the names of the nodes and edges from the syntax above: The nodes consist of three latent variables (visual, textual, and speed), and nine observed variables (x1-x9). The edges are nine factor loadings - and three latent variable correlations, included by default. We can confirm which nodes are available by running <code><a href="../reference/get_nodes.html">get_nodes()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="../reference/get_nodes.html">get_nodes</a></span>(fit)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt;       name shape</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt; 1   visual  oval</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt; 2  textual  oval</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; 3    speed  oval</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; 4       x1  rect</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt; 5       x2  rect</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt; 6       x3  rect</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt; 7       x4  rect</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt; 8       x5  rect</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; 9       x6  rect</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt; 10      x7  rect</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt; 11      x8  rect</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt; 12      x9  rect</span></a></code></pre></div>
<p>And for the edges:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="../reference/get_edges.html">get_edges</a></span>(fit)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt;       from      to arrow   label connect_from connect_to curvature</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt; 1   visual      x1  last 0.77***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt; 2   visual      x2  last 0.42***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt; 3   visual      x3  last 0.58***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; 4  textual      x4  last 0.85***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; 5  textual      x5  last 0.86***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; 6  textual      x6  last 0.84***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; 7    speed      x7  last 0.57***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; 8    speed      x8  last 0.72***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt; 9    speed      x9  last 0.67***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt; 10      x1      x1  both 0.40***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt; 11      x2      x2  both 0.82***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt; 12      x3      x3  both 0.66***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">#&gt; 13      x4      x4  both 0.27***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">#&gt; 14      x5      x5  both 0.27***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co">#&gt; 15      x6      x6  both 0.30***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="co">#&gt; 16      x7      x7  both 0.68***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">#&gt; 17      x8      x8  both 0.48***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="co">#&gt; 18      x9      x9  both 0.56***           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="co">#&gt; 19  visual  visual  both    1.00           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-22" title="22"><span class="co">#&gt; 20 textual textual  both    1.00           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="co">#&gt; 21   speed   speed  both    1.00           NA         NA        NA</span></a>
<a class="sourceLine" id="cb4-24" title="24"><span class="co">#&gt; 22  visual textual  none 0.46***           NA         NA        60</span></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="co">#&gt; 23  visual   speed  none 0.47***           NA         NA        60</span></a>
<a class="sourceLine" id="cb4-26" title="26"><span class="co">#&gt; 24 textual   speed  none 0.28***           NA         NA        60</span></a></code></pre></div>
</div>
<div id="step-3-specifying-a-layout" class="section level3">
<h3 class="hasAnchor">
<a href="#step-3-specifying-a-layout" class="anchor"></a>Step 3: Specifying a layout</h3>
<p>We can specify a simple layout for two hypothetical nodes <code>x</code> and <code>y</code> is generated as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw"><a href="../reference/layout.html">get_layout</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="dt">rows =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#&gt;   y x name</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt; 1 1 1    x</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt; 2 1 2    y</span></a></code></pre></div>
<p>For a mediation model, one might specify a layout like this:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw"><a href="../reference/layout.html">get_layout</a></span>(<span class="st">""</span>, <span class="st">"m"</span>, <span class="st">""</span>,</a>
<a class="sourceLine" id="cb6-2" title="2">           <span class="st">"x"</span>, <span class="st">""</span>, <span class="st">"y"</span>, <span class="dt">rows =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">#&gt;   y x name</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">#&gt; 1 1 1    x</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">#&gt; 2 2 2    m</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">#&gt; 3 1 3    y</span></a></code></pre></div>
<p>For a three-item CFA model, one might specify:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="../reference/layout.html">get_layout</a></span>(<span class="st">""</span>, <span class="st">"F"</span>, <span class="st">""</span>,</a>
<a class="sourceLine" id="cb7-2" title="2">           <span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>, <span class="dt">rows =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#&gt;   y x name</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#&gt; 1 1 1   y1</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#&gt; 2 2 2    F</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt; 3 1 2   y2</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#&gt; 4 1 3   y3</span></a></code></pre></div>
<p>And for the CFA model we estimated above:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">lay &lt;-<span class="st"> </span><span class="kw"><a href="../reference/layout.html">get_layout</a></span>(<span class="st">""</span>, <span class="st">""</span>, <span class="st">"visual"</span>,<span class="st">""</span>,<span class="st">"textual"</span>,<span class="st">""</span>,<span class="st">"speed"</span>,<span class="st">""</span>, <span class="st">""</span>,</a>
<a class="sourceLine" id="cb8-2" title="2">                  <span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span>, <span class="st">"x4"</span>, <span class="st">"x5"</span>, <span class="st">"x6"</span>, <span class="st">"x7"</span>, <span class="st">"x8"</span>, <span class="st">"x9"</span>, <span class="dt">rows =</span> <span class="dv">2</span>)</a></code></pre></div>
<p>At this point, we could simply plot the graph:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="../reference/graph.html">graph</a></span>(<span class="dt">model =</span> fit, <span class="dt">layout =</span> lay)</a></code></pre></div>
<p><img src="Plotting_graphs_files/figure-html/unnamed-chunk-10-1.png" width="100%"></p>
</div>
<div id="optional-step-4-accessing-the-graph-data-before-plotting" class="section level3">
<h3 class="hasAnchor">
<a href="#optional-step-4-accessing-the-graph-data-before-plotting" class="anchor"></a>Optional step 4: accessing the graph data before plotting</h3>
<p>One important feature of <code>tidySEM</code> graphing is that the data used to compose the plot can be conveniently accessed an modified before plotting. First, use <code><a href="../reference/prepare_graph.html">prepare_graph()</a></code> to assign the plot data to an object.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">graph_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/prepare_graph.html">prepare_graph</a></span>(<span class="dt">model =</span> fit, <span class="dt">layout =</span> lay)</a></code></pre></div>
</div>
<div id="optional-step-5-access-the-nodes-and-edges" class="section level3">
<h3 class="hasAnchor">
<a href="#optional-step-5-access-the-nodes-and-edges" class="anchor"></a>Optional step 5: Access the nodes and edges</h3>
<p>The nodes and edges can be examined using <code><a href="../reference/nodes.html">nodes(graph_data)</a></code> and <code><a href="../reference/edges.html">edges(graph_data)</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw"><a href="../reference/nodes.html">nodes</a></span>(graph_data)</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="co">#&gt;       name shape   label  x y node_xmin node_xmax node_ymin node_ymax</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="co">#&gt; 1    speed  oval   speed 14 4      13.5      14.5       3.5       4.5</span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="co">#&gt; 2  textual  oval textual 10 4       9.5      10.5       3.5       4.5</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="co">#&gt; 3   visual  oval  visual  6 4       5.5       6.5       3.5       4.5</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co">#&gt; 4       x1  rect      x1  2 2       1.4       2.6       1.6       2.4</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co">#&gt; 5       x2  rect      x2  4 2       3.4       4.6       1.6       2.4</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co">#&gt; 6       x3  rect      x3  6 2       5.4       6.6       1.6       2.4</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">#&gt; 7       x4  rect      x4  8 2       7.4       8.6       1.6       2.4</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="co">#&gt; 8       x5  rect      x5 10 2       9.4      10.6       1.6       2.4</span></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co">#&gt; 9       x6  rect      x6 12 2      11.4      12.6       1.6       2.4</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="co">#&gt; 10      x7  rect      x7 14 2      13.4      14.6       1.6       2.4</span></a>
<a class="sourceLine" id="cb11-13" title="13"><span class="co">#&gt; 11      x8  rect      x8 16 2      15.4      16.6       1.6       2.4</span></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="co">#&gt; 12      x9  rect      x9 18 2      17.4      18.6       1.6       2.4</span></a>
<a class="sourceLine" id="cb11-15" title="15"><span class="kw"><a href="../reference/edges.html">edges</a></span>(graph_data)</a>
<a class="sourceLine" id="cb11-16" title="16"><span class="co">#&gt;       from      to   label arrow curvature connect_from connect_to</span></a>
<a class="sourceLine" id="cb11-17" title="17"><span class="co">#&gt; 1   visual      x1 0.77***  last        NA         left      right</span></a>
<a class="sourceLine" id="cb11-18" title="18"><span class="co">#&gt; 2   visual      x2 0.42***  last        NA       bottom      right</span></a>
<a class="sourceLine" id="cb11-19" title="19"><span class="co">#&gt; 3   visual      x3 0.58***  last        NA       bottom        top</span></a>
<a class="sourceLine" id="cb11-20" title="20"><span class="co">#&gt; 4  textual      x4 0.85***  last        NA       bottom      right</span></a>
<a class="sourceLine" id="cb11-21" title="21"><span class="co">#&gt; 5  textual      x5 0.86***  last        NA       bottom        top</span></a>
<a class="sourceLine" id="cb11-22" title="22"><span class="co">#&gt; 6  textual      x6 0.84***  last        NA       bottom       left</span></a>
<a class="sourceLine" id="cb11-23" title="23"><span class="co">#&gt; 7    speed      x7 0.57***  last        NA       bottom        top</span></a>
<a class="sourceLine" id="cb11-24" title="24"><span class="co">#&gt; 8    speed      x8 0.72***  last        NA       bottom       left</span></a>
<a class="sourceLine" id="cb11-25" title="25"><span class="co">#&gt; 9    speed      x9 0.67***  last        NA        right       left</span></a>
<a class="sourceLine" id="cb11-26" title="26"><span class="co">#&gt; 10      x1      x1 0.40***  both        NA       bottom     bottom</span></a>
<a class="sourceLine" id="cb11-27" title="27"><span class="co">#&gt; 11      x2      x2 0.82***  both        NA       bottom     bottom</span></a>
<a class="sourceLine" id="cb11-28" title="28"><span class="co">#&gt; 12      x3      x3 0.66***  both        NA       bottom     bottom</span></a>
<a class="sourceLine" id="cb11-29" title="29"><span class="co">#&gt; 13      x4      x4 0.27***  both        NA       bottom     bottom</span></a>
<a class="sourceLine" id="cb11-30" title="30"><span class="co">#&gt; 14      x5      x5 0.27***  both        NA       bottom     bottom</span></a>
<a class="sourceLine" id="cb11-31" title="31"><span class="co">#&gt; 15      x6      x6 0.30***  both        NA       bottom     bottom</span></a>
<a class="sourceLine" id="cb11-32" title="32"><span class="co">#&gt; 16      x7      x7 0.68***  both        NA       bottom     bottom</span></a>
<a class="sourceLine" id="cb11-33" title="33"><span class="co">#&gt; 17      x8      x8 0.48***  both        NA       bottom     bottom</span></a>
<a class="sourceLine" id="cb11-34" title="34"><span class="co">#&gt; 18      x9      x9 0.56***  both        NA       bottom     bottom</span></a>
<a class="sourceLine" id="cb11-35" title="35"><span class="co">#&gt; 19  visual  visual    1.00  both        NA          top        top</span></a>
<a class="sourceLine" id="cb11-36" title="36"><span class="co">#&gt; 20 textual textual    1.00  both        NA          top        top</span></a>
<a class="sourceLine" id="cb11-37" title="37"><span class="co">#&gt; 21   speed   speed    1.00  both        NA          top        top</span></a>
<a class="sourceLine" id="cb11-38" title="38"><span class="co">#&gt; 22  visual textual 0.46***  none        60          top        top</span></a>
<a class="sourceLine" id="cb11-39" title="39"><span class="co">#&gt; 23  visual   speed 0.47***  none        60          top        top</span></a>
<a class="sourceLine" id="cb11-40" title="40"><span class="co">#&gt; 24 textual   speed 0.28***  none        60          top        top</span></a></code></pre></div>
</div>
<div id="optional-step-6-modify-the-nodes-and-edges" class="section level3">
<h3 class="hasAnchor">
<a href="#optional-step-6-modify-the-nodes-and-edges" class="anchor"></a>Optional step 6: Modify the nodes and edges</h3>
<p>At this stage, we may want to improve the basic plot slightly. The functions <code>nodes(graph_data) &lt;- ...</code> and <code>edges(graph_data) &lt;- ...</code> can be used to modify the nodes and edges. These functions pair well with the general tidyverse workflow. For example, we might want to print node labels for latent variables in <em>Title Case</em> instead of just using the variable names:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb12-2" title="2"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="co">#&gt; Attaching package: 'dplyr'</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="co">#&gt; The following objects are masked from 'package:stats':</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="co">#&gt;     filter, lag</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co">#&gt; The following objects are masked from 'package:base':</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">#&gt;     intersect, setdiff, setequal, union</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(stringr)</a>
<a class="sourceLine" id="cb12-11" title="11"><span class="kw"><a href="../reference/nodes.html">nodes</a></span>(graph_data) &lt;-<span class="st"> </span><span class="kw"><a href="../reference/nodes.html">nodes</a></span>(graph_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">label =</span> <span class="kw">str_to_title</span>(label))</a></code></pre></div>
<p>Now, for the edges, we see that the default edging algorithm has connected some nodes side-to-side (based on the smallest possible Euclidian distance). However, in this simple graph, it makes more sense to connect all nodes top-to-bottom - except for the latent variable covariances. We can use the same conditional replacement for the edges:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw"><a href="../reference/edges.html">edges</a></span>(graph_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">connect_from =</span> <span class="kw"><a href="https://rdrr.io/r/base/replace.html">replace</a></span>(connect_from, <span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(curvature), <span class="st">"bottom"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">connect_to =</span> <span class="kw"><a href="https://rdrr.io/r/base/replace.html">replace</a></span>(connect_to, <span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(curvature), <span class="st">"top"</span>)) -&gt;<span class="st"> </span><span class="kw"><a href="../reference/edges.html">edges</a></span>(graph_data)</a></code></pre></div>
</div>
<div id="step-7-plot-the-graph" class="section level3">
<h3 class="hasAnchor">
<a href="#step-7-plot-the-graph" class="anchor"></a>Step 7: Plot the graph</h3>
<p>Finally, we can plot the resulting customized graph using <code><a href="https://rdrr.io/r/graphics/plot.html">plot(graph_data)</a></code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(graph_data)</a></code></pre></div>
<p><img src="Plotting_graphs_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
</div>
</div>
<div id="connecting-nodes" class="section level2">
<h2 class="hasAnchor">
<a href="#connecting-nodes" class="anchor"></a>Connecting nodes</h2>
<p>The functions <code><a href="../reference/graph.html">graph()</a></code> and <code><a href="../reference/prepare_graph.html">prepare_graph()</a></code> will always try to connect nodes in an aesthetically pleasing way. To do this, they connect nodes by one of the four sides (top, bottom, left and right), based on the shortest distance between two nodes. Alternatively, users can specify a value to the <code>angle</code> parameter. This parameter connects nodes top-to-bottom when they are within <code>angle</code> degrees above and below each other. Remaining nodes are connected side-to-side. Thus, by increasing <code>angle</code> to a larger number (up to 180 degrees), we can also ensure that all nodes are connected top to bottom:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw"><a href="../reference/graph.html">graph</a></span>(<span class="dt">model =</span> fit, <span class="dt">layout =</span> lay, <span class="dt">angle =</span> <span class="dv">170</span>)</a></code></pre></div>
<p><img src="Plotting_graphs_files/figure-html/unnamed-chunk-17-1.png" width="500px" height="150px"></p>
</div>
<div id="visual-aspects" class="section level2">
<h2 class="hasAnchor">
<a href="#visual-aspects" class="anchor"></a>Visual aspects</h2>
<p>The functions <code><a href="../reference/graph.html">graph()</a></code> and <code><a href="../reference/prepare_graph.html">prepare_graph()</a></code> accept several optional visual parameters that can be used to customize the resulting image (see <code>?graph()</code>). These parameters can be passed as extra columns to the <code><a href="../reference/nodes.html">nodes()</a></code> and <code><a href="../reference/edges.html">edges()</a></code> objects. Specifically, edges have the following aesthetics (see <code>?geom_path()</code>):</p>
<ul>
<li>
<code>linetype</code>: The type of line, e.g., continuous (<code>linetype = 1</code> or dashed <code>linetype = 2</code>)</li>
<li>
<code>colour</code>: The colour of the line (e.g., <code>colour = "red"</code> or dashed <code>colour = "blue"</code>)</li>
<li>
<code>size</code>: The size of the line (e.g., <code>size = 1</code> or dashed <code>size = 2</code>)</li>
<li>
<code>alpha</code>: The transparancy of the line (e.g., <code>alpha = 1</code> or dashed <code>alpha = .2</code>)</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">edg &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">from =</span> <span class="st">"x"</span>,</a>
<a class="sourceLine" id="cb16-2" title="2">                  <span class="dt">to =</span> <span class="st">"y"</span>,</a>
<a class="sourceLine" id="cb16-3" title="3">                  <span class="dt">linetype =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb16-4" title="4">                  <span class="dt">colour =</span> <span class="st">"red"</span>,</a>
<a class="sourceLine" id="cb16-5" title="5">                  <span class="dt">size =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb16-6" title="6">                  <span class="dt">alpha =</span> <span class="fl">.5</span>)</a>
<a class="sourceLine" id="cb16-7" title="7"></a>
<a class="sourceLine" id="cb16-8" title="8"><span class="kw"><a href="../reference/graph.html">graph</a></span>(<span class="dt">edges =</span> edg, <span class="dt">layout =</span> <span class="kw"><a href="../reference/layout.html">get_layout</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="dt">rows =</span> <span class="dv">1</span>))</a></code></pre></div>
<p><img src="Plotting_graphs_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<p>Nodes have the following aesthetics (see <code>?geom_polygon()</code>):</p>
<ul>
<li>
<code>linetype</code>: The type of line surrounding the node, e.g., continuous (<code>linetype = 1</code> or dashed <code>linetype = 2</code>)</li>
<li>
<code>colour</code>: The colour of the line surrounding the node (e.g., <code>colour = "red"</code> or dashed <code>colour = "blue"</code>)</li>
<li>
<code>fill</code>: The interior colour of the node (e.g., <code>colour = "red"</code> or dashed <code>colour = "blue"</code>)</li>
<li>
<code>size</code>: The size of the line (e.g., <code>size = 1</code> or dashed <code>size = 2</code>)</li>
<li>
<code>alpha</code>: The transparancy of the node (e.g., <code>alpha = 1</code> or dashed <code>alpha = .2</code>)</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">edg &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">from =</span> <span class="st">"x"</span>,</a>
<a class="sourceLine" id="cb17-2" title="2">                  <span class="dt">to =</span> <span class="st">"y"</span>)</a>
<a class="sourceLine" id="cb17-3" title="3">nod &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">name =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>),</a>
<a class="sourceLine" id="cb17-4" title="4">                    <span class="dt">shape =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"rect"</span>, <span class="st">"oval"</span>),</a>
<a class="sourceLine" id="cb17-5" title="5">                    <span class="dt">linetype =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb17-6" title="6">                    <span class="dt">colour =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"blue"</span>, <span class="st">"blue"</span>),</a>
<a class="sourceLine" id="cb17-7" title="7">                    <span class="dt">fill =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"blue"</span>, <span class="st">"blue"</span>),</a>
<a class="sourceLine" id="cb17-8" title="8">                    <span class="dt">size =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb17-9" title="9">                    <span class="dt">alpha =</span> <span class="fl">.5</span>)</a>
<a class="sourceLine" id="cb17-10" title="10"><span class="kw"><a href="../reference/graph.html">graph</a></span>(<span class="dt">edges =</span> edg, <span class="dt">nodes =</span> nod, <span class="dt">layout =</span> <span class="kw"><a href="../reference/layout.html">get_layout</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="dt">rows =</span> <span class="dv">1</span>))</a></code></pre></div>
<p><img src="Plotting_graphs_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<p>These aesthetics can also be passed to the <code>sem_graph</code> object after preparing the data, for example, for highlighting a specific model element, such as the low factor loading for x2 on visual in the CFA example from before:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw"><a href="../reference/edges.html">edges</a></span>(graph_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">colour =</span> <span class="st">"black"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">colour =</span> <span class="kw"><a href="https://rdrr.io/r/base/replace.html">replace</a></span>(colour, to <span class="op">==</span><span class="st"> "x2"</span>, <span class="st">"red"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">linetype =</span> <span class="kw"><a href="https://rdrr.io/r/base/replace.html">replace</a></span>(linetype, to <span class="op">==</span><span class="st"> "x2"</span>, <span class="dv">2</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">alpha =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">alpha =</span> <span class="kw"><a href="https://rdrr.io/r/base/replace.html">replace</a></span>(alpha, to <span class="op">==</span><span class="st"> "x2"</span>, <span class="fl">.5</span>)) -&gt;<span class="st"> </span><span class="kw"><a href="../reference/edges.html">edges</a></span>(graph_data)</a>
<a class="sourceLine" id="cb18-8" title="8"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(graph_data)</a></code></pre></div>
<p><img src="Plotting_graphs_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-tidysem-workflow">The tidySEM workflow</a></li>
      <li><a href="#example-graphing-a-cfa">Example: Graphing a CFA</a></li>
      <li><a href="#connecting-nodes">Connecting nodes</a></li>
      <li><a href="#visual-aspects">Visual aspects</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Caspar J. van Lissa.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
